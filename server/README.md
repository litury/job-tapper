# Job Tapper - Серверная часть

Job Tapper - это интерактивное приложение для автоматической отправки откликов на вакансии в форме увлекательной игры. Серверная часть отвечает за обработку запросов клиента, взаимодействие с API HeadHunter и управление игровой логикой.

## Технологии

- Node.js
- Express
- TypeScript
- Socket.IO
- Axios
- dotenv

## Структура проекта

```
server/
├── src/
│   ├── modules/
│   │   ├── auth/
│   │   ├── resume/
│   │   └── vacancy/
│   ├── routes/
│   ├── services/
│   ├── shared/
│   │   └── utils/
│   ├── socketHandlers/
│   └── server.ts
├── package.json
└── tsconfig.json
```

## Установка и запуск

1. Установите зависимости:
   ```
   npm install
   ```

2. Создайте файл `.env` в корневой директории сервера и добавьте необходимые переменные окружения:
   ```
   HH_CLIENT_ID=ваш_client_id
   HH_CLIENT_SECRET=ваш_client_secret
   HH_REDIRECT_URI=https://job-tapper-frontend.ru.tuna.am/oauth/callback
   HH_API_URL=https://api.hh.ru
   PORT=3000
   ```

3. Запустите сервер в режиме разработки:
   ```
   npm run dev
   ```

4. Для сборки проекта:
   ```
   npm run build
   ```

5. Для запуска собранного проекта:
   ```
   npm start
   ```

## Основные модули

### Auth
Модуль аутентификации, отвечающий за авторизацию пользователя через HeadHunter OAuth.

### Resume
Модуль резюме, отвечающий за получение и обработку информации о резюме пользователя.

### Vacancy
Модуль вакансий, отвечающий за поиск и обработку вакансий, а также за отправку откликов.

## API и Socket.IO события

### API endpoints

- `GET /auth/hh-login`: Инициирует процесс OAuth авторизации через HeadHunter

### Socket.IO события

#### Аутентификация
- `authenticate`: Аутентификация пользователя
- `validate_token`: Валидация токена пользователя

#### Резюме
- `get-resumes-with-vacancies`: Получение резюме пользователя с подходящими вакансиями
- `get-resume-stats`: Получение статистики по резюме

#### Вакансии
- `get-similar-vacancies`: Получение похожих вакансий для резюме
- `apply-to-vacancy`: Отправка отклика на вакансию

## Взаимодействие с HeadHunter API

Сервер использует `hhService` для взаимодействия с API HeadHunter. Основные операции включают:

- Получение токенов доступа
- Получение информации о пользователе
- Получение резюме пользователя
- Поиск подходящих вакансий
- Отправка откликов на вакансии

## Очередь отправки откликов

Для предотвращения превышения лимитов API HeadHunter, сервер использует очередь для отправки откликов на вакансии. Очередь обрабатывается с интервалом в 5 секунд.

## Обработка ошибок

Сервер обрабатывает различные типы ошибок, включая ошибки аутентификации, ошибки API и сетевые ошибки. Ошибки логируются и отправляются клиенту через Socket.IO события.

## Безопасность

- Используется CORS для ограничения доступа к серверу
- Токены доступа хранятся в памяти сервера и не сохраняются в базу данных
- Все запросы к API HeadHunter выполняются с использованием HTTPS

## Вклад в проект

Мы приветствуем вклад в развитие проекта! Пожалуйста, ознакомьтесь с [руководством по внесению вклада](CONTRIBUTING.md) перед тем, как начать.

## Лицензия

Этот проект лицензирован под MIT License - см. файл [LICENSE](LICENSE) для подробностей.